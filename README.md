Русская раскладка для клавиатуры Apple Wired Keyboard MB110
======
Russian (Macintosh, Propis)  
Русская (Макинтош, Пропись)  
Изображение клавиатуры, для которой предназначена эта раскладка, - в файле apple-mb110-keyboard-rus.jpg  

Назначение раскладки - упрощенный доступ к символам, часто используемым в исходном коде программ,  разрабатываемых на языках программирования, основанных на русском языке.  
То есть это русская раскладка клавиатуры для программистов, кодирующих на языках 1С, Пропись и т.д.  


### Особенности раскладки

1. Горизонтально расположенные клавиши с цифрами от 1 до 0 отданы под знаки препинания и специальные символы, отображенные на этих клавишах. То есть цифры набрать при помощи этих клавиш не получится даже используя Shift. Цифры набираются только на дополнительном цифровом блоке, расположенном в правой части клавиатуры.  

2. В этой раскладке осуществляется быстрый/прямой (без Shift) доступ к символам  
	' - одиночная кавычка, или апостроф  
	" - двойная кавычка  
	№ - номер  
	% - процент  
	: - двоеточие  
	, - запятая  
	. - точка  
	; - точка с запятой  
	{ - открывающаяся фигурная скобка  
	} - закрывающаяся фигурная скобка	    

3. Так же, используя клавишу сдвига регистра Shift, осуществляется набор символов  
	! - восклицательный знак  
	@ - собачка, он же 'на', он же 'at'  
	'#' - решетка, он же диез  
	$ - доллар  
	\ - обратный слэш  
	^ - крышечка  
	& - амперсант  
	'*' - звездочка  

4. Все перечисленные в пунктах 2 и 3 символы нарисованы и набираются на клавишах с цифрами от 1 до 0 локализованной (официально продаваемой в России) клавиатуры Apple Wired Keyboard MB110, за исключением  
	' - одиночная кавычка набирается при нажатии клавиши '1'. На клавише изображение символа отсутствует.  
	{ - открывающаяся фигурная скобка набирается при нажатии на клавишу '9'. На клавише изображение символа отсутствует.  
	} - закрывающаяся фигурная скобка набирается при нажатии на клавишу '0'. На клавише изображение символа отсутствует.  
	'\' - обратный слэш набирается при нажатии комбинации из двух клавиш Shift+[5], вместо изображенного на клавише знака '%'.  


### Инструкция по применению к Ubuntu 13.10  
Порядок шагов важен!  
Шаг 1.  
Добавить в конец файла  /usr/share/X11/xkb/symbols/ru  

	// Apple layout
	partial default alphanumeric_keys
	xkb_symbols "ru_mac" {
	include "ru(common)"

	    name[Group1]= "Russian Macintosh";

	    key <LSGT> {        [         greater,            less      ]       };
	    key <TLDE> {        [    bracketright,     bracketleft      ]       };
	    key	<AE01> {        [      apostrophe,          exclam      ]       };
	    key <AE02> {        [        quotedbl,              at      ]       };
	    key <AE03> {        [      numerosign,      numbersign      ]       };
	    key <AE04> {        [         percent,          dollar      ]       };
	    key <AE05> {        [           colon,       backslash      ]       };
	    key <AE06> {        [           comma,     asciicircum      ]       };
	    key <AE07> {        [          period,       ampersand      ]       };
	    key <AE08> {        [       semicolon,        asterisk      ]       };
	    key	<AE09> {	[       braceleft,       parenleft      ]       };
	    key	<AE10> {        [      braceright,      parenright      ]       };
	    key <BKSL> {        [     Cyrillic_io,     Cyrillic_IO      ]       };
	};  
  
Шаг 2.  
В файл /usr/share/X11/xkb/rules/evdev.xml вставляем  

        <variant>  
          <configItem>  
            <name>ru_mac</name>  
            <description>Russian (Macintosh)</description>  
          </configItem>  
        </variant>  

Сразу после  

	<name>ru</name>  

        <shortDescription>ru</shortDescription>  
        <description>Russian</description>  
        <languageList>  
          <iso639Id>rus</iso639Id>  
        </languageList>  
      </configItem>  
      <variantList>  

Шаг 3.  
Удаляем откомпилированные раскладки  
	sudo rm /var/lib/xkb/server-*.xkm  

Шаг 4.  
Ждем полчаса или находим как обновить кеш раскладок  
Мне было проще подождать, поэтому я не знаю как обновить кеш :)

Шаг 5.  
Последний шаг - добавляем раскладку 'Russian (Macintosh)' через графический интерфейс Ubuntu  
'Параметры системы' -> 'Клавиатура' -> 'Параметры раскладки'  



### Использована информация  
( привожу несколько ссылок на одну и ту же информацию, на случай исчезновения какой-либо)  
	http://forum.ubuntu.ru/index.php?topic=198392.0  
	https://bugs.freedesktop.org/attachment.cgi?id=78099  
	http://cgit.freedesktop.org/xkeyboard-config/commit/?id=9e91c4c970f780087b49a2cc4f6a666b7ef2737c  


Удачи!
